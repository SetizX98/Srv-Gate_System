<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Calculadora Cient√≠fica - Telegram Mini App</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <!-- Librer√≠a math.js para evaluaci√≥n segura de expresiones -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.7.0/math.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }
    
    body {
      background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
      width: 100vw;
      height: 100vh;
      min-height: -webkit-fill-available;
      overflow: hidden;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 10px;
    }
    
    /* Part√≠culas decorativas */
    .particles {
      position: absolute;
      width: 100%;
      height: 100%;
      z-index: 0;
      overflow: hidden;
    }
    
    .particle {
      position: absolute;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 50%;
      will-change: transform;
    }
    
    /* DISPLAY DE FECHA */
    .date-display {
      position: absolute;
      top: 15px;
      right: 15px;
      z-index: 3;
      color: rgba(255, 255, 255, 0.85);
      font-size: 14px;
      font-weight: 600;
      padding: 8px 15px;
      background: rgba(0, 0, 0, 0.25);
      backdrop-filter: blur(10px);
      border-radius: 12px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      box-shadow: 
        0 5px 15px rgba(0, 0, 0, 0.2),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
      text-align: center;
      line-height: 1.3;
      min-width: 160px;
      opacity: 0;
      animation: fadeInUp 0.8s ease forwards 0.2s;
      text-transform: capitalize;
    }
    
    /* CABECERA CON T√çTULO */
    .header {
      width: 100%;
      max-width: 500px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
      padding: 0 10px;
      z-index: 2;
      margin-top: 10px;
    }
    
    .title {
      color: white;
      font-size: 22px;
      font-weight: 700;
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
    }
    
    .header-controls {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .logo {
      width: 50px;
      height: 50px;
      background: linear-gradient(135deg, #0088ff, #0066cc);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      animation: logoGlow 2s infinite alternate;
      box-shadow: 
        0 0 20px rgba(0, 136, 255, 0.6),
        inset 0 0 10px rgba(255, 255, 255, 0.3);
      font-size: 24px;
      color: white;
    }
    
    /* Bot√≥n para expandir/contraer funciones - AHORA EN EL TECLADO */
    .toggle-functions {
      height: 60px;
      background: linear-gradient(145deg, #9c27b0, #7b1fa2);
      border: none;
      border-radius: 12px;
      color: white;
      font-size: 20px;
      font-weight: bold;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 
        0 5px 0 rgba(0, 0, 0, 0.3),
        inset 0 2px 5px rgba(255, 255, 255, 0.1);
      transition: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);
      touch-action: manipulation;
    }
    
    .toggle-functions:active {
      transform: translateY(5px) scale(0.98);
      box-shadow: 
        0 0 0 rgba(0, 0, 0, 0.3),
        inset 0 2px 5px rgba(255, 255, 255, 0.1);
    }
    
    @keyframes logoGlow {
      from { box-shadow: 0 0 15px rgba(0, 136, 255, 0.5); }
      to { box-shadow: 0 0 25px rgba(0, 136, 255, 0.8); }
    }
    
    /* CALCULADORA */
    .calculator {
      width: 100%;
      max-width: 500px;
      background: rgba(0, 0, 0, 0.4);
      backdrop-filter: blur(15px);
      border-radius: 20px;
      border: 2px solid rgba(255, 255, 255, 0.15);
      box-shadow: 
        0 20px 50px rgba(0, 0, 0, 0.4),
        inset 0 0 40px rgba(255, 255, 255, 0.05);
      padding: 20px;
      z-index: 2;
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    
    /* PANTALLA DE LA CALCULADORA */
    .screen {
      background: rgba(10, 20, 30, 0.9);
      border-radius: 15px;
      padding: 20px;
      text-align: right;
      border: 1px solid rgba(255, 255, 255, 0.1);
      box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.5);
      min-height: 120px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      overflow: hidden;
    }
    
    .expression {
      color: rgba(255, 255, 255, 0.7);
      font-size: 18px;
      min-height: 27px;
      word-break: break-all;
      text-align: right;
      overflow-x: auto;
      white-space: nowrap;
    }
    
    .result {
      color: white;
      font-size: 36px;
      font-weight: 600;
      text-shadow: 0 0 10px rgba(0, 200, 255, 0.7);
      min-height: 42px;
      word-break: break-all;
      text-align: right;
      overflow-x: auto;
    }
    
    /* CONTENEDOR DE FUNCIONES CIENT√çFICAS (COLAPSABLE) */
    .scientific-functions {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 10px;
      margin-bottom: 10px;
      transition: all 0.3s ease;
      overflow: hidden;
      max-height: 140px;
      opacity: 1;
    }
    
    .scientific-functions.collapsed {
      max-height: 0;
      opacity: 0;
      margin-bottom: 0;
      gap: 0;
    }
    
    /* TECLADO B√ÅSICO - ORGANIZADO COMO EN LA IMAGEN */
    .basic-keyboard {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 10px;
    }
    
    /* BOTONES GENERALES */
    .btn {
      height: 60px;
      border: none;
      border-radius: 12px;
      font-size: 18px;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);
      touch-action: manipulation;
      color: white;
      box-shadow: 
        0 5px 0 rgba(0, 0, 0, 0.3),
        inset 0 2px 5px rgba(255, 255, 255, 0.1);
    }
    
    .btn:active {
      transform: translateY(5px) scale(0.98);
      box-shadow: 
        0 0 0 rgba(0, 0, 0, 0.3),
        inset 0 2px 5px rgba(255, 255, 255, 0.1);
    }
    
    /* TIPOS DE BOTONES */
    .btn-number {
      background: linear-gradient(145deg, #3a3a5d, #2a2a4a);
    }
    
    .btn-operator {
      background: linear-gradient(145deg, #0088ff, #0066cc);
    }
    
    .btn-function {
      background: linear-gradient(145deg, #9c27b0, #7b1fa2);
      font-size: 16px;
    }
    
    .btn-clear {
      background: linear-gradient(145deg, #ff4444, #cc0000);
    }
    
    .btn-equals {
      background: linear-gradient(145deg, #4CAF50, #2E7D32);
    }
    
    .btn-zero {
      grid-column: span 2;
    }
    
    /* BOT√ìN DE PAR√âNTESIS */
    .btn-parenthesis {
      background: linear-gradient(145deg, #FF9800, #F57C00);
      font-size: 18px;
    }
    
    /* BOT√ìN DE RETROCEDER */
    .btn-backspace {
      background: linear-gradient(145deg, #FF5722, #E64A19);
      font-size: 18px;
    }
    
    /* Animaciones */
    @keyframes fadeInUp {
      from { 
        opacity: 0;
        transform: translateY(30px); 
      }
      to { 
        opacity: 1;
        transform: translateY(0); 
      }
    }
    
    /* Responsive */
    @media (max-height: 700px) {
      .date-display {
        top: 10px;
        right: 10px;
        font-size: 13px;
        padding: 6px 12px;
        min-width: 140px;
      }
      
      .header {
        margin-bottom: 10px;
        margin-top: 5px;
      }
      
      .title {
        font-size: 20px;
      }
      
      .calculator {
        padding: 15px;
        gap: 15px;
      }
      
      .screen {
        padding: 15px;
        min-height: 100px;
      }
      
      .expression {
        font-size: 16px;
      }
      
      .result {
        font-size: 30px;
      }
      
      .btn, .toggle-functions {
        height: 50px;
        font-size: 16px;
      }
      
      .btn-function {
        font-size: 14px;
      }
      
      .scientific-functions {
        max-height: 120px;
      }
      
      .logo {
        width: 45px;
        height: 45px;
        font-size: 22px;
      }
    }
    
    @media (max-width: 380px) {
      .date-display {
        top: 8px;
        right: 8px;
        font-size: 12px;
        padding: 5px 10px;
        min-width: 130px;
      }
      
      .calculator {
        padding: 12px;
        gap: 12px;
      }
      
      .btn, .toggle-functions {
        height: 45px;
        font-size: 15px;
      }
      
      .btn-function {
        font-size: 13px;
      }
      
      .screen {
        padding: 12px;
        min-height: 90px;
      }
      
      .expression {
        font-size: 15px;
      }
      
      .result {
        font-size: 28px;
      }
      
      .scientific-functions {
        max-height: 100px;
        gap: 8px;
      }
      
      .basic-keyboard {
        gap: 8px;
      }
      
      .logo {
        width: 40px;
        height: 40px;
        font-size: 20px;
      }
    }
    
    /* Elementos decorativos de esquina */
    .corner-decoration {
      position: absolute;
      width: 80px;
      height: 80px;
      z-index: 1;
    }
    
    .corner-top-left {
      top: 10px;
      left: 10px;
      border-top: 3px solid rgba(0, 136, 255, 0.3);
      border-left: 3px solid rgba(0, 136, 255, 0.3);
      border-radius: 15px 0 0 0;
    }
    
    .corner-bottom-right {
      bottom: 10px;
      right: 10px;
      border-bottom: 3px solid rgba(0, 136, 255, 0.3);
      border-right: 3px solid rgba(0, 136, 255, 0.3);
      border-radius: 0 0 15px 0;
    }
  </style>
</head>
<body>
  <!-- Part√≠culas decorativas -->
  <div class="particles" id="particles"></div>
  
  <!-- DISPLAY DE FECHA -->
  <div class="date-display" id="dateDisplay"></div>
  
  <!-- Elementos decorativos de esquina -->
  <div class="corner-decoration corner-top-left"></div>
  <div class="corner-decoration corner-bottom-right"></div>
  
  <!-- CABECERA -->
  <div class="header">
    <div class="title">Calculadora Cient√≠fica</div>
    <div class="header-controls">
      <div class="logo">üßÆ</div>
    </div>
  </div>
  
  <!-- CALCULADORA -->
  <div class="calculator">
    <!-- PANTALLA -->
    <div class="screen">
      <div class="expression" id="expression"></div>
      <div class="result" id="result">0</div>
    </div>
    
    <!-- FUNCIONES CIENT√çFICAS (COLAPSABLES) - ORGANIZADAS COMO EN LA IMAGEN -->
    <div class="scientific-functions" id="scientificFunctions">
      <!-- Fila 1: ‚àö œÄ ^ ! e -->
      <button class="btn btn-function" data-action="sqrt">‚àö</button>
      <button class="btn btn-function" data-action="pi">œÄ</button>
      <button class="btn btn-function" data-action="pow">^</button>
      <button class="btn btn-function" data-action="factorial">!</button>
      <button class="btn btn-function" data-action="e">e</button>
      
      <!-- Fila 2: sin cos tan log ln x -->
      <button class="btn btn-function" data-action="sin">sin</button>
      <button class="btn btn-function" data-action="cos">cos</button>
      <button class="btn btn-function" data-action="tan">tan</button>
      <button class="btn btn-function" data-action="log">log</button>
      <button class="btn btn-function" data-action="ln">ln</button>
      <button class="btn btn-function" data-action="multiply">x</button>
    </div>
    
    <!-- TECLADO B√ÅSICO ORGANIZADO COMO EN LA IMAGEN -->
    <div class="basic-keyboard" id="basicKeyboard">
      <!-- Fila 1: AC () % √∑ -->
      <button class="btn btn-clear" data-action="clear">AC</button>
      <button class="btn btn-parenthesis" data-value="(">(</button>
      <button class="btn btn-parenthesis" data-value=")">)</button>
      <button class="btn btn-operator" data-action="percentage">%</button>
      <button class="btn btn-operator" data-action="divide">√∑</button>
      
      <!-- Fila 2: 7 8 9 √ó ‚å´ -->
      <button class="btn btn-number" data-value="7">7</button>
      <button class="btn btn-number" data-value="8">8</button>
      <button class="btn btn-number" data-value="9">9</button>
      <button class="btn btn-operator" data-action="multiply">√ó</button>
      <button class="btn btn-backspace" data-action="backspace">‚å´</button>
      
      <!-- Fila 3: 4 5 6 - ‚óÄ‚ñ∂ -->
      <button class="btn btn-number" data-value="4">4</button>
      <button class="btn btn-number" data-value="5">5</button>
      <button class="btn btn-number" data-value="6">6</button>
      <button class="btn btn-operator" data-action="subtract">-</button>
      <button class="toggle-functions" id="toggleFunctions">‚óÄ‚ñ∂</button>
      
      <!-- Fila 4: 1 2 3 + . -->
      <button class="btn btn-number" data-value="1">1</button>
      <button class="btn btn-number" data-value="2">2</button>
      <button class="btn btn-number" data-value="3">3</button>
      <button class="btn btn-operator" data-action="add">+</button>
      <button class="btn btn-number" data-value=".">.</button>
      
      <!-- Fila 5: 0 . √ó = -->
      <button class="btn btn-number btn-zero" data-value="0">0</button>
      <button class="btn btn-number" data-value=".">.</button>
      <button class="btn btn-operator" data-action="multiply">√ó</button>
      <button class="btn btn-equals" data-action="equals">=</button>
    </div>
  </div>
  
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Elementos de la calculadora
      const expressionElement = document.getElementById('expression');
      const resultElement = document.getElementById('result');
      const scientificFunctions = document.getElementById('scientificFunctions');
      const basicKeyboard = document.getElementById('basicKeyboard');
      const dateDisplay = document.getElementById('dateDisplay');
      const particlesContainer = document.getElementById('particles');
      const toggleFunctionsBtn = document.getElementById('toggleFunctions');
      
      // Estado de la calculadora
      let currentExpression = '';
      let currentResult = '0';
      let isScientificCollapsed = false;
      
      // FUNCI√ìN PARA FORMATEAR LA FECHA EN ESPA√ëOL
      function formatDate() {
        const now = new Date();
        const days = ['Domingo', 'Lunes', 'Martes', 'Mi√©rcoles', 'Jueves', 'Viernes', 'S√°bado'];
        const months = ['enero', 'febrero', 'marzo', 'abril', 'mayo', 'junio', 
                       'julio', 'agosto', 'septiembre', 'octubre', 'noviembre', 'diciembre'];
        
        const dayOfWeek = days[now.getDay()];
        const dayOfMonth = now.getDate();
        const month = months[now.getMonth()];
        
        return `${dayOfWeek}, ${dayOfMonth} de ${month}`;
      }
      
      // ACTUALIZAR LA FECHA EN LA PANTALLA
      function updateDate() {
        dateDisplay.textContent = formatDate();
      }
      
      // SISTEMA DE PART√çCULAS
      function createParticles() {
        const particles = [];
        const colors = [
          'rgba(255, 107, 107, 0.3)', 
          'rgba(255, 255, 255, 0.2)', 
          'rgba(255, 142, 83, 0.25)',
          'rgba(0, 136, 255, 0.2)',
          'rgba(255, 215, 0, 0.2)',
          'rgba(138, 43, 226, 0.2)'
        ];
        
        const containerWidth = particlesContainer.clientWidth;
        const containerHeight = particlesContainer.clientHeight;
        
        for (let i = 0; i < 25; i++) {
          const particle = document.createElement('div');
          particle.className = 'particle';
          
          const size = Math.random() * 15 + 2;
          particle.style.width = `${size}px`;
          particle.style.height = `${size}px`;
          
          particle.style.background = colors[Math.floor(Math.random() * colors.length)];
          
          const initialX = Math.random() * (containerWidth - size);
          const initialY = Math.random() * (containerHeight - size);
          
          particle.style.left = `${initialX}px`;
          particle.style.top = `${initialY}px`;
          
          const speed = Math.random() * 0.6 + 0.2;
          const angle = Math.random() * Math.PI * 2;
          
          const velocityX = Math.cos(angle) * speed;
          const velocityY = Math.sin(angle) * speed;
          
          const rotationSpeed = (Math.random() - 0.5) * 1.5;
          let rotation = 0;
          
          particlesContainer.appendChild(particle);
          
          particles.push({
            element: particle,
            x: initialX,
            y: initialY,
            size: size,
            velocityX: velocityX,
            velocityY: velocityY,
            rotation: rotation,
            rotationSpeed: rotationSpeed
          });
        }
        
        function animateParticles() {
          const currentWidth = particlesContainer.clientWidth;
          const currentHeight = particlesContainer.clientHeight;
          
          for (const p of particles) {
            p.x += p.velocityX;
            p.y += p.velocityY;
            
            p.rotation += p.rotationSpeed;
            
            if (p.x <= 0) {
              p.x = 0;
              p.velocityX = Math.abs(p.velocityX);
            } else if (p.x >= currentWidth - p.size) {
              p.x = currentWidth - p.size;
              p.velocityX = -Math.abs(p.velocityX);
            }
            
            if (p.y <= 0) {
              p.y = 0;
              p.velocityY = Math.abs(p.velocityY);
            } else if (p.y >= currentHeight - p.size) {
              p.y = currentHeight - p.size;
              p.velocityY = -Math.abs(p.velocityY);
            }
            
            p.element.style.left = `${p.x}px`;
            p.element.style.top = `${p.y}px`;
            p.element.style.transform = `rotate(${p.rotation}deg)`;
          }
          
          requestAnimationFrame(animateParticles);
        }
        
        animateParticles();
      }
      
      // ACTUALIZAR LA PANTALLA DE LA CALCULADORA
      function updateScreen() {
        expressionElement.textContent = currentExpression || '';
        resultElement.textContent = currentResult;
      }
      
      // AGREGAR VALOR A LA EXPRESI√ìN
      function addToExpression(value) {
        // Si el resultado actual no es '0' y la expresi√≥n est√° vac√≠a, limpiar el resultado
        if (currentResult !== '0' && currentExpression === '') {
          currentResult = '0';
        }
        
        currentExpression += value;
        updateScreen();
      }
      
      // LIMPIAR TODO
      function clearAll() {
        currentExpression = '';
        currentResult = '0';
        updateScreen();
      }
      
      // BORRAR √öLTIMO CAR√ÅCTER
      function backspace() {
        currentExpression = currentExpression.slice(0, -1);
        updateScreen();
      }
      
      // CALCULAR RESULTADO
      function calculateResult() {
        if (!currentExpression) return;
        
        try {
          // Reemplazar s√≠mbolos para math.js
          let expressionToEval = currentExpression
            .replace(/√ó/g, '*')
            .replace(/√∑/g, '/')
            .replace(/œÄ/g, 'pi')
            .replace(/‚àö/g, 'sqrt')
            .replace(/\^/g, '^');
          
          // Evaluar usando math.js de forma segura
          const result = math.evaluate(expressionToEval);
          
          // Formatear resultado
          let formattedResult = result.toString();
          
          // Redondear si es un n√∫mero muy largo
          if (formattedResult.length > 12 && !isNaN(result)) {
            formattedResult = Number(result).toPrecision(10);
          }
          
          currentResult = formattedResult;
          currentExpression = formattedResult;
          
          updateScreen();
          
        } catch (error) {
          currentResult = 'Error';
          updateScreen();
          
          // Restaurar despu√©s de 1.5 segundos
          setTimeout(() => {
            currentResult = '0';
            currentExpression = '';
            updateScreen();
          }, 1500);
        }
      }
      
      // MANEJAR FUNCIONES ESPECIALES
      function handleSpecialFunction(action) {
        switch(action) {
          case 'sin':
            addToExpression('sin(');
            break;
          case 'cos':
            addToExpression('cos(');
            break;
          case 'tan':
            addToExpression('tan(');
            break;
          case 'log':
            addToExpression('log(');
            break;
          case 'ln':
            addToExpression('ln(');
            break;
          case 'sqrt':
            addToExpression('‚àö(');
            break;
          case 'pi':
            addToExpression('œÄ');
            break;
          case 'e':
            addToExpression('e');
            break;
          case 'pow':
            addToExpression('^');
            break;
          case 'factorial':
            addToExpression('!');
            break;
          case 'percentage':
            addToExpression('%');
            break;
        }
      }
      
      // TOGGLE FUNCIONES CIENT√çFICAS
      function toggleScientificFunctions() {
        isScientificCollapsed = !isScientificCollapsed;
        scientificFunctions.classList.toggle('collapsed', isScientificCollapsed);
        toggleFunctionsBtn.textContent = isScientificCollapsed ? '‚óÄ‚ñ∂' : '‚óÄ‚ñ∂';
      }
      
      // INICIALIZAR TECLADOS
      function initializeKeyboards() {
        scientificFunctions.addEventListener('click', handleButtonClick);
        basicKeyboard.addEventListener('click', handleButtonClick);
        toggleFunctionsBtn.addEventListener('click', toggleScientificFunctions);
        
        // Tambi√©n soporte para teclado f√≠sico
        document.addEventListener('keydown', function(event) {
          const key = event.key;
          
          // Prevenir comportamiento por defecto para teclas de operaci√≥n
          if (['+', '-', '*', '/', 'Enter', 'Escape'].includes(key)) {
            event.preventDefault();
          }
          
          // Mapear teclas
          if (key >= '0' && key <= '9') {
            addToExpression(key);
          } else if (key === '.') {
            addToExpression('.');
          } else if (key === '+') {
            addToExpression('+');
          } else if (key === '-') {
            addToExpression('-');
          } else if (key === '*') {
            addToExpression('√ó');
          } else if (key === '/') {
            addToExpression('√∑');
          } else if (key === 'Enter' || key === '=') {
            calculateResult();
          } else if (key === 'Escape' || key === 'Delete') {
            clearAll();
          } else if (key === 'Backspace') {
            backspace();
          } else if (key === '(' || key === ')') {
            addToExpression(key);
          } else if (key === '%') {
            addToExpression('%');
          }
        });
      }
      
      // MANEJAR CLICS EN BOTONES
      function handleButtonClick(event) {
        const button = event.target.closest('.btn, .toggle-functions');
        if (!button) return;
        
        // Efecto visual de clic
        const originalTransform = button.style.transform;
        button.style.transform = 'translateY(5px) scale(0.98)';
        setTimeout(() => {
          button.style.transform = originalTransform;
        }, 150);
        
        const value = button.getAttribute('data-value');
        const action = button.getAttribute('data-action');
        
        if (value) {
          addToExpression(value);
        } else if (action) {
          switch(action) {
            case 'clear':
              clearAll();
              break;
            case 'backspace':
              backspace();
              break;
            case 'equals':
              calculateResult();
              break;
            case 'divide':
              addToExpression('√∑');
              break;
            case 'multiply':
              addToExpression('√ó');
              break;
            case 'add':
              addToExpression('+');
              break;
            case 'subtract':
              addToExpression('-');
              break;
            case 'percentage':
              addToExpression('%');
              break;
            default:
              handleSpecialFunction(action);
          }
        }
      }
      
      // Verificar si estamos en Telegram WebApp
      const isTelegramWebApp = window.Telegram && window.Telegram.WebApp;
      
      // Inicializar WebApp de Telegram si est√° disponible
      if (isTelegramWebApp) {
        Telegram.WebApp.ready();
        console.log('‚úÖ Calculadora Cient√≠fica para Telegram inicializada');
        Telegram.WebApp.expand();
        Telegram.WebApp.setBackgroundColor('#0f0c29');
        Telegram.WebApp.setHeaderColor('#0f0c29');
      }
      
      // INICIALIZAR TODO
      createParticles();
      updateDate();
      initializeKeyboards();
      updateScreen();
      
      // Actualizar la fecha cada minuto
      setInterval(updateDate, 60000);
      
      // Programar actualizaci√≥n de fecha a medianoche
      function scheduleMidnightUpdate() {
        const now = new Date();
        const midnight = new Date();
        midnight.setHours(24, 0, 0, 0);
        const timeUntilMidnight = midnight.getTime() - now.getTime();
        
        setTimeout(function() {
          updateDate();
          scheduleMidnightUpdate();
        }, timeUntilMidnight);
      }
      
      scheduleMidnightUpdate();
    });
  </script>
</body>
</html>
